<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Uber Trip Results</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{ --bg:#0e1328; --panel:#0b1224; --acc:#8ab4ff; --acc2:#77e6b6; }
    *{ cursor: none; }
    body{ background: radial-gradient(1200px 600px at 10% -10%, rgba(119,230,182,.15), transparent 60%),
                     radial-gradient(1200px 600px at 110% 110%, rgba(138,180,255,.18), transparent 60%),
                     var(--bg);
          color:#e9f1ff; font-family:'Inter',system-ui,sans-serif; }
    .container-lg{ max-width:1200px; }
    .header{
      padding: 28px 0 10px;
    }
    .card-soft{
      background: rgba(12,18,40,.72); border:1px solid rgba(255,255,255,.06);
      border-radius: 18px; backdrop-filter: blur(10px);
      box-shadow: 0 10px 34px rgba(0,0,0,.45);
    }
    .stat{
      text-align:center; padding:20px; border-radius:16px; position:relative; overflow:hidden;
    }
    .stat h6{ color:#b7c6e6; font-weight:600; letter-spacing:.4px; }
    .stat .val{ font-size:2rem; font-weight:800; line-height:1; }
    .stat-1{ background: linear-gradient(180deg, rgba(138,180,255,.16), rgba(138,180,255,.06)); }
    .stat-2{ background: linear-gradient(180deg, rgba(119,230,182,.18), rgba(119,230,182,.06)); }
    .stat-3{ background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); }

    .btn-back{
      background: linear-gradient(135deg, var(--acc), var(--acc2));
      border: none; color:#0a1024; font-weight:800;
      box-shadow: 0 8px 22px rgba(119,230,182,.28);
    }
    .chart-card{ padding: 12px 12px 4px; }
    .empty{
      padding: 24px; text-align:center; color:#ffb3b3; font-weight:600;
      border:1px dashed rgba(255,255,255,.2); border-radius:14px;
    }

    /* Custom cursor */
    .cursor-dot,.cursor-ring{ position:fixed; top:0; left:0; pointer-events:none; z-index:9999; transform:translate(-50%,-50%); will-change:transform; }
    .cursor-dot{ width:8px; height:8px; border-radius:50%; background:#77e6b6; box-shadow:0 0 18px rgba(119,230,182,.8); }
    .cursor-ring{ width:34px;height:34px;border-radius:50%; border:2px solid rgba(138,180,255,.8); box-shadow:0 0 30px rgba(138,180,255,.45); }
  </style>
</head>
<body>
  <div class="cursor-dot" id="cDot"></div>
  <div class="cursor-ring" id="cRing"></div>

  <header class="header">
    <div class="container-lg d-flex align-items-center justify-content-between">
      <h2 class="m-0 fw-800">Results for Base: <span class="text-info">{{ base_number }}</span></h2>
      <a class="btn btn-back" href="/">
        <i class="bi bi-arrow-left"></i> Back to Home
      </a>
    </div>
  </header>

  <main class="container-lg">
    {% if empty %}
      <div class="empty mt-4">
        No data found for the selected filters. Please adjust your filters and try again.
      </div>
    {% else %}
      <!-- Summary -->
      <section class="row g-3 mt-2">
        <div class="col-12 col-md-4">
          <div class="stat stat-1 card-soft">
            <h6>Total Trips</h6>
            <div class="val">{{ "{:,}".format(total_trips) }}</div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="stat stat-2 card-soft">
            <h6>Total Active Vehicles</h6>
            <div class="val">{{ "{:,}".format(total_vehicles) }}</div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="stat stat-3 card-soft">
            <h6>Avg Trips / Vehicle</h6>
            <div class="val">{{ avg_tpv }}</div>
          </div>
        </div>
      </section>

      <!-- Charts -->
      <section class="row g-4 my-2">
        <div class="col-12">
          <div class="card-soft chart-card">
            {{ graph1|safe }}
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div class="card-soft chart-card">
            {{ graph2|safe }}
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div class="card-soft chart-card">
            {{ graph3|safe }}
          </div>
        </div>
      </section>
    {% endif %}
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom cursor (same engine as home) -->
  <script>
    (() => {
      const dot = document.getElementById('cDot');
      const ring = document.getElementById('cRing');
      let x = innerWidth/2, y = innerHeight/2, rx=x, ry=y;
      addEventListener('mousemove', e => { x = e.clientX; y = e.clientY; });
      function loop(){ rx += (x-rx)*0.15; ry += (y-ry)*0.15;
        dot.style.transform = `translate(${x}px,${y}px) translate(-50%,-50%)`;
        ring.style.transform = `translate(${rx}px,${ry}px) translate(-50%,-50%)`;
        requestAnimationFrame(loop);
      } loop();
    })();
  </script>
</body>
</html>
